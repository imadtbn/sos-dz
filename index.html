<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Najda Dz Ø§Ù„Ù†Ø¬Ø¯Ø©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
    <link rel="icon" href="icons/najda_icon_1.png" alt="icon" type="image/png" loading="lazy" class="welcome-logo">

    <meta name="description"
        content="Ù…Ù†ØµØ© Ø§Ù„Ù†Ø¬Ø¯Ø© ÙˆØ§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ù„ØªØ­Ø¯ÙŠØ¯ Ø£Ù‚Ø±Ø¨ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¥Ø³Ø¹Ø§ÙØŒ Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ©ØŒ Ø§Ù„Ø´Ø±Ø·Ø©ØŒ Ù…Ø®Ø§Ø¨Ø± Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©ØŒ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§ØªØŒ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ ÙˆØ¬Ø±Ù‘ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø¨Ø³Ø±Ø¹Ø© ÙˆØ¯Ù‚Ø© Ø¹Ø¨Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ. ÙˆØµÙˆÙ„ ÙÙˆØ±ÙŠ Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© Ù…Ù†Ùƒ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª.">
    <!-- Ù„ÙˆÙ† Ø´Ø±ÙŠØ· Ø§Ù„Ù…ØªØµÙØ­ -->
    <meta name="theme-color" content="#1d3557">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#1d3557">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0f1f33">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1d3557">


    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/najda_icon_3.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/najda_icon_3.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/najda_icon_3.png">

    <link rel="stylesheet" href="style/css-main.css">
    <link rel="stylesheet" href="style/SidebarAnimation.css">

    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("/najda-dz/sw.js")
                .then(() => console.log("Service Worker Registered"));
        }
    </script>

    <style>
        /* ===== Emergency Numbers Section ===== */

        .emergency-numbers {
            padding: 20px 15px;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .section-header h3 {
            font-size: 1.2rem;
            margin: 0;
        }

        .section-header i {
            font-size: 1.4rem;
        }

        /* Ø´Ø¨ÙƒØ© Ù…Ø±Ù†Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 14px;
        }

        /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
        .number-card {
            background: #ffffff;
            border-radius: 14px;
            padding: 14px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .number-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        }

        /* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
        .number-card h4 {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .number-card h4 img {
            border-radius: 6px;
        }

        /* Ø±Ø§Ø¨Ø· Ø§Ù„Ø§ØªØµØ§Ù„ */
        .call-link-Emergency,
        .messenger-link {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
            background: #e63946;
            color: #fff;
            padding: 10px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 0.95rem;
            transition: background 0.2s ease;
            width: 100%;
        }

        .call-link-Emergency:hover {
            background: #c1121f;
        }

        .messenger-link {
            background: #1877f2;
        }

        .messenger-link:hover {
            background: #0f5ed7;
        }

        /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
        @media (max-width: 480px) {

            .numbers-grid {
                grid-template-columns: 1fr;
            }

            .number-card {
                padding: 16px;
            }

            .call-link-Emergency,
            .messenger-link {
                font-size: 1rem;
                padding: 12px;
            }

            .number-card h4 {
                font-size: 1rem;
            }
        }
    </style>

</head>

<body>

    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <img src="icons/najda_icon_3.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¬Ø¯Ø© Dz" width="50" height="50" loading="lazy">
                <h1>Ø§Ù„Ù†Ø¬Ø¯Ø© Dz</h1>
            </div>

            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>

            <div class="nav-overlay" id="navOverlay"></div>

            <nav class="nav-links" id="navLinks">
                <button class="close-menu" id="closeMenu">
                    <i class="fas fa-times"></i>
                </button>

                <a href="" class="active">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="pages/pharmacies.html">ØµÙŠØ¯Ù„ÙŠØ§Øª</a>
                <a href="pages/police.html">Ø§Ù„Ø´Ø±Ø·Ø©</a>
                <a href="pages/laboratories.html">ØªØ­Ø§Ù„ÙŠÙ„ Ø·Ø¨ÙŠØ©</a>
                <a href="pages/gendarmerie.html">Ø§Ù„Ø¯Ø±Ùƒ Ø§Ù„ÙˆØ·Ù†ÙŠ</a>
                <a href="pages/depannage.html">Ø¬Ø± Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a>
                <a href="pages/about.html">Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹</a>
            </nav>

        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2>Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù†Ø¬Ø¯Ø© ÙˆØ§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</h2>
            <p>ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ØŒ Ø­Ø¯Ø¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£Ù‚Ø±Ø¨ Ù…Ø³ØªØ´ÙÙ‰ØŒ Ù…Ø±ÙƒØ² Ø´Ø±Ø·Ø©ØŒ ÙØ±Ù‚Ø© Ø§Ù„Ø¯Ø±Ùƒ Ø§Ù„ÙˆØ·Ù†ÙŠ Ø£Ùˆ ÙˆØ­Ø¯Ø© Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ©
                Ù…Ø¹ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù‡Ø§ØªÙ
                ÙˆØ¥Ù…ÙƒØ§Ù†ÙŠØ© ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª</p>

            <div class="location-access">
                <button id="getLocation" class="btn btn-primary">
                    <i class="fas fa-map-marker-alt"></i>
                    ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ GPS
                </button>

                <button id="showAllServices" class="btn btn-secondary">
                    <i class="fas fa-map-marked-alt"></i>
                    Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ù…ÙŠØ¹...
                </button>

                <a href="pages/subscription.html" class="btn btn-warning subscription-btn">
                    <i class="fas fa-id-card"></i>
                    Ø¥Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø§Ù„Ø®Ø¯Ù…Ø©
                </a>
            </div>

            <div id="locationStatus" style="margin-top: 15px; color: #ffdddd; font-weight: 700;"></div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container">
        <div class="main-content">

            <!-- Map Section -->
            <div class="map-section">
                <div class="section-header">
                    <i class="fas fa-map"></i>
                    <h3>Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©</h3>
                </div>
                <div id="map"></div>
            </div>

            <!-- Services Section -->
            <div class="services">

                <!-- hospital -->
                <div class="service-card hospital">
                    <div class="service-header">
                        <div class="service-title">
                            <div class="service-icon">
                                <i class="fas fa-hospital"></i>
                            </div>
                            <h3>Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª</h3>
                        </div>
                    </div>
                    <div class="service-details">
                        <div id="hospitalsList">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ" Ù„Ø¹Ø±Ø¶ Ø£Ù‚Ø±Ø¨ Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª</p>
                        </div>
                    </div>
                    <!-- Ø²Ø± Ø§Ù„Ù…Ø²ÙŠØ¯ -->
                    <div class="more-btn-wrapper">
                        <a href="pages/hospitals.html" class="btn btn-secondary more-btn">
                            <i class="fas fa-list-ul"></i>
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                </div>

                <!-- laboratory -->
                <div class="service-card laboratory">
                    <div class="service-header">
                        <div class="service-title">
                            <div class="service-icon">
                                <i class="fas fa-flask"></i>
                            </div>
                            <h3>Ù…Ø®Ø§Ø¨Ø± Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©</h3>
                        </div>
                    </div>

                    <div class="service-details">
                        <div id="laboratoriesList">
                            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ" Ù„Ø¹Ø±Ø¶ Ø£Ù‚Ø±Ø¨ Ù…Ø®Ø§Ø¨Ø± Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©</p>
                        </div>
                    </div>
                    <!-- Ø²Ø± Ø§Ù„Ù…Ø²ÙŠØ¯ -->
                    <div class="more-btn-wrapper">
                        <a href="pages/laboratories.html" class="btn btn-secondary more-btn">
                            <i class="fas fa-list-ul"></i>
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                </div>

                <!-- doctors -->
                <div class="service-card doctor">
                    <div class="service-header">
                        <div class="service-title">
                            <div class="service-icon">
                                <i class="fas fa-user-md"></i>
                            </div>
                            <h3>Ø£Ø·Ø¨Ø§Ø¡</h3>
                        </div>
                    </div>

                    <div class="service-details">
                        <div id="doctorList">
                            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ" Ù„Ø¹Ø±Ø¶ Ø£Ù‚Ø±Ø¨ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ </p>
                        </div>
                    </div>
                    <!-- Ø²Ø± Ø§Ù„Ù…Ø²ÙŠØ¯ -->
                    <div class="more-btn-wrapper">
                        <a href="pages/doctors.html" class="btn btn-secondary more-btn">
                            <i class="fas fa-list-ul"></i>
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                </div>

                <!-- pharmacy -->
                <div class="service-card pharmacy">
                    <div class="service-header">

                        <div class="service-title">
                            <div class="service-icon">
                                <i class="fas fa-capsules"></i>
                            </div>
                            <h3>ØµÙŠØ¯Ù„ÙŠØ§Øª</h3>
                        </div>

                    </div>

                    <div class="service-details">
                        <div id="pharmacyList">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ" Ù„Ø¹Ø±Ø¶ Ø£Ù‚Ø±Ø¨ Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª</p>
                        </div>
                    </div>
                    <!-- Ø²Ø± Ø§Ù„Ù…Ø²ÙŠØ¯ -->
                    <div class="more-btn-wrapper">
                        <a href="pages/pharmacies.html" class="btn btn-secondary more-btn">
                            <i class="fas fa-list-ul"></i>
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                </div>

                <!-- police -->
                <div class="service-card police">
                    <div class="service-header">
                        <div class="service-title">
                            <div class="service-icon">
                                <img src="icons/dgsn.png" alt="logo dgpc" width="55" height="55" loading="lazy"></i>
                            </div>
                            <h3>Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ø´Ø±Ø·Ø©</h3>
                            <p>
                                <a href="tel:1584" class="call-link-Emergency">
                                    <span class="phone-number-Emergency">1548</span>
                                    <i class="fas fa-phone"></i>
                                </a>
                            </p>
                        </div>
                    </div>
                    <div class="service-details">
                        <div id="policeList">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ" Ù„Ø¹Ø±Ø¶ Ø£Ù‚Ø±Ø¨ Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ø´Ø±Ø·Ø©</p>
                        </div>
                    </div>

                    <!-- Ø²Ø± Ø§Ù„Ù…Ø²ÙŠØ¯ -->
                    <div class="more-btn-wrapper">
                        <a href="pages/police.html" class="btn btn-secondary more-btn">
                            <i class="fas fa-list-ul"></i>
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                </div>

                <!-- gendarmerie -->
                <div class="service-card military">
                    <div class="service-header">
                        <div class="service-title">
                            <div class="service-icon">
                                <img src="icons/cgn.png" alt="logo dgpc" width="55" height="55" loading="lazy"></i>
                            </div>
                            <h3>ÙØ±Ù‚ Ø§Ù„Ø¯Ø±Ùƒ Ø§Ù„ÙˆØ·Ù†ÙŠ</h3>
                            <p>
                                <a href="tel:1055" class="call-link-Emergency">
                                    <span class="phone-number-Emergency">1055</span>
                                    <i class="fas fa-phone"></i>
                                </a>
                            </p>
                        </div>
                    </div>
                    <div class="service-details">
                        <div id="militaryList">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ" Ù„Ø¹Ø±Ø¶ Ø£Ù‚Ø±Ø¨ ÙØ±Ù‚Ø© Ù„Ù„Ø¯Ø±Ùƒ Ø§Ù„ÙˆØ·Ù†ÙŠ</p>
                        </div>
                    </div>
                    <!-- Ø²Ø± Ø§Ù„Ù…Ø²ÙŠØ¯ -->
                    <div class="more-btn-wrapper">
                        <a href="pages/gendarmerie.html" class="btn btn-secondary more-btn">
                            <i class="fas fa-list-ul"></i>
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                </div>

                <!-- protectio civil -->
                <div class="service-card civil-defense">
                    <div class="service-header">
                        <div class="service-title">
                            <div class="service-icon">
                                <img src="icons/dgpc.svg" alt="logo dgpc" width="55" height="55" loading="lazy"></i>
                            </div>
                            <h3>ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ©</h3>
                            <p>
                                <a href="tel:1021" class="call-link-Emergency">
                                    <span class="phone-number-Emergency">1021</span>
                                    <i class="fas fa-phone"></i>
                                </a>
                            </p>
                        </div>

                    </div>
                    <div class="service-details">
                        <div id="civilDefenseList">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ" Ù„Ø¹Ø±Ø¶ Ø£Ù‚Ø±Ø¨ ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ© </p>
                        </div>
                    </div>
                    <!-- Ø²Ø± Ø§Ù„Ù…Ø²ÙŠØ¯ -->
                    <div class="more-btn-wrapper">
                        <a href="pages/protectioncivil.html" class="btn btn-secondary more-btn">
                            <i class="fas fa-list-ul"></i>
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                </div>

                <!-- depannage Auto -->
                <div class="service-card depannage">
                    <div class="service-header">

                        <div class="service-title">
                            <div class="service-icon">
                                <i class="fas fa-truck-pickup"></i>
                            </div>
                            <h3>Ø®Ø¯Ù…Ø© Ø¬Ø± Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ø´Ø§Ø­Ù†Ø§Øª</h3>
                        </div>

                    </div>

                    <div class="service-details">
                        <div id="depannageList">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                            <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ" Ù„Ø¹Ø±Ø¶ Ø£Ù‚Ø±Ø¨ Ø®Ø¯Ù…Ø§Øª Ø¬Ø± Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆØ§Ù„Ø´Ø§Ø­Ù†Ø§Øª</p>
                        </div>
                    </div>
                    <!-- Ø²Ø± Ø§Ù„Ù…Ø²ÙŠØ¯ -->
                    <div class="more-btn-wrapper">
                        <a href="pages/depannage.html" class="btn btn-secondary more-btn">
                            <i class="fas fa-list-ul"></i>
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„
                            <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                </div>

            </div>

        </div>

        <!-- Emergency Numbers -->
        <div class="emergency-numbers">
            <div class="section-header">
                <h3>Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø§Ù„Ù‡Ø§Ù…Ø©</h3>
                <i class="fas fa-phone"></i>
            </div>

            <div class="numbers-grid">

                <!-- Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ© -->
                <div class="number-card pulse">
                    <h4>
                        <img src="icons/dgpc.svg" alt="logo dgpc" width="31" height="32" loading="lazy">
                        Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ©
                    </h4>

                    <p>
                        <a href="tel:121" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">1021</span>
                        </a>
                    </p>
                </div>

                <!-- Ø§Ù„Ø¯Ø±Ùƒ Ø§Ù„ÙˆØ·Ù†ÙŠ -->
                <div class="number-card">
                    <h4>
                        <img src="icons/CGN.jpg" alt="logo CGN" width="31" height="32" loading="lazy">
                        Ø§Ù„Ø¯Ø±Ùƒ Ø§Ù„ÙˆØ·Ù†ÙŠ
                    </h4>

                    <p>
                        <a href="tel:1055" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">1055</span>
                        </a>
                    </p>
                </div>

                <!-- Ø§Ù„Ø¯Ø±Ùƒ Ø§Ù„ÙˆØ·Ù†ÙŠ Ø·Ø±ÙŠÙ‚ÙŠ-->
                <div class="number-card">
                    <h4>
                        <img src="icons/tariki.jpg" alt="logo tariki" width="31" height="32" loading="lazy">
                        Ù…Ø±ÙƒØ² Ø§Ù„Ø¥Ø¹Ù„Ø§Ù… ÙˆØ§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø±ÙˆØ±ÙŠ
                    </h4>

                    <p>
                        <a href="https://m.me/tariki.Gn" target="_blank" class="messenger-link">
                            <i class="fab fa-facebook-messenger"></i>
                            <span class="phone-number-Emergency">Tariki.GN.Ø·Ø±ÙŠÙ‚ÙŠ</span>
                        </a>
                    </p>
                </div>

                <!-- Ø­Ø±Ø³ Ø§Ù„Ø³ÙˆØ§Ø­Ù„ -->
                <div class="number-card">
                    <h4>
                        <img src="icons/CFN.png" alt="logo cfa" width="31" height="32" loading="lazy">
                        Ø­Ø±Ø³ Ø§Ù„Ø³ÙˆØ§Ø­Ù„
                    </h4>

                    <p>
                        <a href="tel:1054" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">1054</span>
                        </a>
                    </p>
                </div>

                <!-- Ø§Ù„Ø´Ø±Ø·Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© -->
                <div class="number-card">
                    <h4>
                        <img src="icons/dgsn.png" alt="logo dgsn" width="31" height="32" loading="lazy">
                        Ø§Ù„Ø´Ø±Ø·Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©
                    </h4>

                    <p>
                        <a href="tel:1548" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">1548</span>
                        </a>
                    </p>
                </div>

                <!-- Ø¬Ù…Ù‡Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø§ØµØ© Ù„Ù„Ø´Ø±Ø·Ø© -->
                <div class="number-card">
                    <h4>
                        <img src="icons/gosp.jpg" alt="logo gosp" width="31" height="32" loading="lazy">
                        ÙØ±Ù‚Ø© Ø¬Ù…Ù‡Ø±Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø®Ø§ØµØ© Ù„Ù„Ø´Ø±Ø·Ø© Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ©
                    </h4>

                    <p>
                        <a href="tel:104" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">104</span>
                        </a>
                    </p>
                </div>

                <!-- Ø§Ù„Ù‡Ù„Ø§Ù„ Ø§Ù„Ø£Ø­Ù…Ø± -->
                <div class="number-card">
                    <h4>
                        <img src="icons/cra.webp" alt="logo gosp" width="31" height="32" loading="lazy">
                        Ø§Ù„Ù‡Ù„Ø§Ù„ Ø§Ù„Ø£Ø­Ù…Ø± Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠ
                    </h4>

                    <p>
                        <a href="tel:+21323778232" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">+21323778232</span>
                        </a>
                    </p>
                </div>

                <!-- Ø³ÙˆÙ†Ù„ØºØ§Ø² Ù„Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙˆØ§Ù„ØºØ§Ø² -->
                <div class="number-card">
                    <h4>
                        <img src="icons/sonelgaz.png" alt="logo sonelgaz" width="31" height="32" loading="lazy">
                        Ø³ÙˆÙ†Ù„ØºØ§Ø² Ù„Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¡ ÙˆØ§Ù„ØºØ§Ø²
                    </h4>

                    <p>
                        <a href="tel:3030" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">3030</span>
                        </a>
                    </p>
                </div>

                <!-- Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ù„Ù„Ù…ÙŠØ§Ù‡ -->
                <div class="number-card">
                    <h4>
                        <img src="icons/ade.png" alt="logo ade" width="31" height="32" loading="lazy">
                        Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±ÙŠØ© Ù„Ù„Ù…ÙŠØ§Ù‡
                    </h4>

                    <p>
                        <a href="tel:1593" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">1593</span>
                        </a>
                    </p>
                </div>

                <!-- Ø³ÙŠØ§Ù„ Ù„Ù„ØªØ·Ù‡ÙŠØ± ÙˆØ§Ù„Ù…ÙŠØ§Ù‡ -->
                <div class="number-card">
                    <h4>
                        <img src="icons/seaal.webp" alt="logo seaal" width="31" height="32" loading="lazy">
                        Ø³ÙŠØ§Ù„ Ù„Ù„ØªØ·Ù‡ÙŠØ± ÙˆØ§Ù„Ù…ÙŠØ§Ù‡
                    </h4>

                    <p>
                        <a href="tel:1594" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">1594</span>
                        </a>
                    </p>
                </div>

                <!-- Ù†ÙØ·Ø§Ù„ Ù„Ù„Ù…Ø­Ø±ÙˆÙ‚Ø§Øª ÙˆØ§Ù„ÙˆÙ‚ÙˆØ¯ -->
                <div class="number-card">
                    <h4>
                        <img src="icons/naftal.webp" alt="logo naftal" width="31" height="32" loading="lazy">
                        Ù†ÙØ·Ø§Ù„ Ù„Ù„Ù…Ø­Ø±ÙˆÙ‚Ø§Øª ÙˆØ§Ù„ÙˆÙ‚ÙˆØ¯
                    </h4>

                    <p>
                        <a href="tel:3305" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">3305</span>
                        </a>
                    </p>
                </div>

                <!-- Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ØºØ§Ø¨Ø§Øª -->
                <div class="number-card">
                    <h4>
                        <img src="icons/DGF.png" alt="logo DGF" width="31" height="32" loading="lazy">
                        Ø§Ù„Ù…Ø¯ÙŠØ±ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„ØºØ§Ø¨Ø§Øª
                    </h4>

                    <p>
                        <a href="tel:1070" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">1070</span>
                        </a>
                    </p>
                </div>

                <!-- Ù…Ø¹Ù‡Ø¯ Ø¨Ø§Ø³ØªÙˆØ± -->
                <div class="number-card">
                    <h4>
                        <img src="icons/pasteur.jpg" alt="logo naftal" width="31" height="32" loading="lazy">
                        Ù…Ø¹Ù‡Ø¯ Ø¨Ø§Ø³ØªÙˆØ± - Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±
                    </h4>

                    <p>
                        <a href="tel:+21323367504" class="call-link-Emergency">
                            <i class="fas fa-phone"></i>
                            <span class="phone-number-Emergency">+21323367504</span>
                        </a>
                    </p>
                </div>

            </div>
        </div>

    </div>

    <!-- Route Modal -->
    <div id="routeModal" class="modal">
        <div class="modal-content modern-modal">
            <div class="modal-header">
                <h3 id="routeTitle">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø±</h3>
                <button class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="modal-body">
                <div class="mini-map-container">
                    <div id="miniMap"></div>
                </div>

                <div id="routeDetails" class="route-info"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="footer-grid">

                <!-- ØªØ¹Ø±ÙŠÙ -->
                <div class="footer-col">
                    <div class="footer-logo">
                        <h2>Ø§Ù„Ù†Ø¬Ø¯Ø© Dz</h2>
                        <p>Ù…Ù†ØµØ© ÙˆØ·Ù†ÙŠØ© Ù„ØªØ­Ø¯ÙŠØ¯ Ø£Ù‚Ø±Ø¨ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù†Ø¬Ø¯Ø© ÙˆØ§Ù„Ø·ÙˆØ§Ø±Ø¦ ÙÙŠ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± Ø¨Ø¯Ù‚Ø© ÙˆØ³Ø±Ø¹Ø©.</p>
                        <img src="icons/najda_icon_11.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¬Ø¯Ø© Dz" loading="lazy">
                    </div>

                </div>

                <!-- Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ -->
                <div class="footer-col">
                    <h4><i class="fas fa-ambulance"></i> Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù†Ø¬Ø¯Ø© ÙˆØ§Ù„Ø·ÙˆØ§Ø±Ø¦</h4>
                    <ul>
                        <li><a href="pages/hospitals.html"><i class="fas fa-hospital"></i> Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª</a></li>
                        <li><a href="pages/police.html"><i class="fas fa-shield-alt"></i> Ù…Ø±Ø§ÙƒØ² Ø§Ù„Ø´Ø±Ø·Ø©</a></li>
                        <li><a href="pages/gendarmerie.html"><i class="fas fa-star"></i>Ø§Ù„Ø¯Ø±Ùƒ Ø§Ù„ÙˆØ·Ù†ÙŠ</a></li>
                        <li><a href="pages/protectioncivil.html"><i class="fas fa-fire-extinguisher"></i> Ø§Ù„Ø­Ù…Ø§ÙŠØ©
                                Ø§Ù„Ù…Ø¯Ù†ÙŠØ©</a></li>
                        <li><a href="pages/depannage.html"><i class="fas fa-truck-pickup"></i>Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¬Ø± ÙˆØ§Ù„Ø±Ø£Ø¨ Ù„Ù„Ø³ÙŠØ§Ø±Ø§Øª
                                ÙˆØ§Ù„Ø´Ø§Ø­Ù†Ø§Øª</a></li>

                    </ul>
                </div>

                <!-- Ø®Ø¯Ù…Ø§Øª ØµØ­ÙŠØ© -->
                <div class="footer-col">
                    <h4><i class="fas fa-heartbeat"></i> Ø®Ø¯Ù…Ø§Øª ØµØ­ÙŠØ©</h4>
                    <ul>
                        <li><a href="pages/doctors.html"><i class="fas fa-user-md"></i>Ø£Ø·Ø¨Ø§Ø¡ Ù…Ø®ØªÙ„Ù Ø§Ù„ØªØ®ØµØµØ§Øª</a></li>
                        <li><a href="pages/laboratories.html"><i class="fas fa-vials"></i> Ù…Ø®Ø§Ø¨Ø± Ø§Ù„ØªØ­Ø§Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©</a>
                        </li>
                        <li><a href="pages/pharmacies.html"><i class="fas fa-capsules"></i> Ø§Ù„ØµÙŠØ¯Ù„ÙŠØ§Øª</a>
                        </li>
                    </ul>
                </div>

                <!-- Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø© -->
                <div class="footer-col">
                    <h4><i class="fas fa-link"></i> Ø±ÙˆØ§Ø¨Ø· Ù…Ù‡Ù…Ø©</h4>
                    <ul>
                        <li><a href="pages/about.html"><i class="fas fa-info-circle"></i> Ø¹Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹</a></li>
                        <li><a href="pages/contact.html"><i class="fas fa-envelope"></i> Ø§ØªØµÙ„ Ø¨Ù†Ø§</a></li>
                        <li><a href="pages/privacypolicy.html"><i class="fas fa-user-shield"></i> Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
                        </li>
                        <li><a href="pages/guideline.html"><i class="fas fa-book"></i> Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯Ø§Øª</a></li>
                        <li><a href="pages/subscription.html"><i class="fas fa-id-card"></i>Ø§Ù„Ø¥Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù†Ø¬Ø¯Ø©</a>
                        </li>

                    </ul>
                </div>

            </div>

            <div class="footer-bottom">
                <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2026</p>
            </div>

        </div>

        <!-- Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø£Ø¹Ù„Ù‰ -->
        <button id="scrollTopBtn"><i class="fas fa-arrow-up"></i></button>
    </footer>

    <!-- Ø²Ø± Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø§Ù„Ø¹Ø§Ø¦Ù… -->
    <div class="floating-wrapper">

        <button id="emergencyToggle" class="floating-emergency">
            <i class="fas fa-phone"></i>
        </button>

        <div id="emergencyMenu" class="emergency-menu">
            <a href="tel:1021"><img src="icons/dgpc.svg" alt="logo dgpc" width="22" height="22" loading="lazy"></i>
                Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ©</a>
            <a href="tel:1548"><img src="icons/dgsn.png" alt="logo dgsn" width="22" height="22" loading="lazy"></i>
                Ø§Ù„Ø´Ø±Ø·Ø©</a>
            <a href="tel:1055"><img src="icons/CGN.jpg" alt="logo cgn" width="22" height="22" loading="lazy"></i> Ø§Ù„Ø¯Ø±Ùƒ
                Ø§Ù„ÙˆØ·Ù†ÙŠ</a>
            <a href="tel:1054"><img src="icons/CFN.png" alt="logo CFN" width="22" height="22" loading="lazy">
                </i>Ø­Ø±Ø³ Ø§Ù„Ø³ÙˆØ§Ø­Ù„</a>
        </div>

    </div>

    <!-- JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!--  Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©  script -->
    <script src="script/SidebarAnimation.js"></script>

    <!--  Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª  script -->
    <script src="script/hospitals-data.js"></script>
    <script src="script/laboratories-data.js"></script>
    <script src="script/doctors-data.js"></script>
    <script src="script/pharmacies-data.js"></script>
    <script src="script/police-data.js"></script>
    <script src="script/gendarmerie-data.js"></script>
    <script src="script/units-data.js"></script>
    <script src="script/depannage-data.js"></script>

    <!-- script -->
    <script>
        let userLat = null;
        let userLon = null;

        const LOCATION_STORAGE_KEY = "najda_user_location";
        const LOCATION_EXPIRY_MINUTES = 20;
        const LOCATION_EXPIRY_MS = LOCATION_EXPIRY_MINUTES * 60 * 1000;

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        let map = L.map('map').setView([36.7525, 3.0418], 7);
        let userMarker = null;
        let userLocation = null;
        let miniMap = null;
        let miniMarker = null;
        let miniRouteLine = null;


        // Ø¥Ø¶Ø§ÙØ© Ø·Ø¨Ù‚Ø© Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Ø¯Ø§Ù„Ø© Ù„ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù…Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©
        function normalizeService(item) {
            // ØªÙˆØ­ÙŠØ¯ Ø®Ø· Ø§Ù„Ø·ÙˆÙ„: Ø§Ø³ØªØ®Ø¯Ù… lng Ø¥Ø°Ø§ ÙˆØ¬Ø¯ØŒ ÙˆØ¥Ù„Ø§ Ø§Ø³ØªØ®Ø¯Ù… lon
            const lat = item.lat || 0;
            const lng = item.lng || item.lon || 0;

            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (address) Ù…Ù† wilaya Ùˆ baladia Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
            let address = item.address || '';
            if (!address && item.wilaya) {
                address = `${item.baladia ? item.baladia + 'ØŒ ' : ''}ÙˆÙ„Ø§ÙŠØ© ${item.wilaya}`;
            }

            return {
                ...item,
                lat,
                lng,
                address
            };
        }

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø¨Ø¹Ø¯ ØªÙˆØ­ÙŠØ¯Ù‡Ø§
        const serviceLocations = {
            hospitals: (window.hospitalsData || []).map(normalizeService),
            police: (window.policeData || []).map(normalizeService),
            military: (window.gendarmerieData || []).map(normalizeService),
            civilDefense: (window.unitsData || []).map(normalizeService),
            pharmacy: (window.pharmaciesData || []).map(normalizeService),
            laboratories: (window.laboratoriesData || []).map(normalizeService),
            doctor: (window.doctorsData || []).map(normalizeService),
            depannage: (window.depannageData || []).map(normalizeService)
        };

        // Ø¯Ø§Ù„Ø© Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ© (Ù‡Ø§ÙØ±Ø³ÙŠÙ†)
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a =
                Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            return R * c;
        }

        // Reverse Geocoding
        async function getAddressFromCoordinates(lat, lng) {
            try {
                const response = await fetch(
                    `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&accept-language=ar`
                );
                const data = await response.json();
                if (data && data.address) {
                    const city = data.address.city || data.address.town || data.address.village || data.address.municipality || '';
                    const state = data.address.state || '';
                    const country = data.address.country || '';
                    return [city, state, country].filter(Boolean).join('ØŒ ');
                }
                return '';
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹:', error);
                return '';
            }
        }

        // ØªØ­Ø¯ÙŠØ¯ Ø£Ù‚Ø±Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
        function findNearestServices(userLat, userLng) {
            const nearestServices = {
                hospitals: [],
                police: [],
                military: [],
                civilDefense: [],
                pharmacy: [],
                laboratories: [],
                doctor: [],
                depannage: []
            };

            for (const serviceType in serviceLocations) {
                const services = serviceLocations[serviceType].map(service => {
                    const distance = calculateDistance(userLat, userLng, service.lat, service.lng);
                    return { ...service, distance };
                }).sort((a, b) => a.distance - b.distance);
                nearestServices[serviceType] = services.slice(0, 4);       // Ø¹Ø¯Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙÙŠ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…

            }
            return nearestServices;
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙÙŠ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
        function displayServices(services) {
            const hospitalsList = document.getElementById('hospitalsList');
            const policeList = document.getElementById('policeList');
            const militaryList = document.getElementById('militaryList');
            const civilDefenseList = document.getElementById('civilDefenseList');
            const pharmacyList = document.getElementById('pharmacyList');
            const laboratoriesList = document.getElementById('laboratoriesList');
            const doctorList = document.getElementById('doctorList');
            const depannageList = document.getElementById('depannageList');


            [hospitalsList, policeList, militaryList, civilDefenseList, pharmacyList, laboratoriesList, doctorList, depannageList].forEach(list => {
                if (list) list.innerHTML = '';
            });

            // Ø§Ù„Ù…Ø³ØªØ´ÙÙŠØ§Øª
            services.hospitals.forEach((hospitals, index) => {
                const item = document.createElement('div');
                item.className = 'service-item' + (index === 0 ? ' nearest' : '');
                item.innerHTML = `<span>${hospitals.name}</span><span class="distance">${hospitals.distance.toFixed(1)} ÙƒÙ…</span>`;
                item.addEventListener('click', () => showRouteToService(hospitals));
                hospitalsList.appendChild(item);
            });

            // Ø§Ù„Ø´Ø±Ø·Ø©
            services.police.forEach((police, index) => {
                const item = document.createElement('div');
                item.className = 'service-item' + (index === 0 ? ' nearest' : '');
                item.innerHTML = `<span>${police.name}</span><span class="distance">${police.distance.toFixed(1)} ÙƒÙ…</span>`;
                item.addEventListener('click', () => showRouteToService(police));
                policeList.appendChild(item);
            });

            // Ø§Ù„Ø¯Ø±Ùƒ
            services.military.forEach((military, index) => {
                const item = document.createElement('div');
                item.className = 'service-item' + (index === 0 ? ' nearest' : '');
                item.innerHTML = `<span>${military.name}</span><span class="distance">${military.distance.toFixed(1)} ÙƒÙ…</span>`;
                item.addEventListener('click', () => showRouteToService(military));
                militaryList.appendChild(item);
            });

            // Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø¯Ù†ÙŠØ©
            services.civilDefense.forEach((civil, index) => {
                const item = document.createElement('div');
                item.className = 'service-item' + (index === 0 ? ' nearest' : '');
                item.innerHTML = `<span>${civil.name}</span><span class="distance">${civil.distance.toFixed(1)} ÙƒÙ…</span>`;
                item.addEventListener('click', () => showRouteToService(civil));
                civilDefenseList.appendChild(item);
            });

            // ØµÙŠØ¯Ù„ÙŠØ§Øª
            services.pharmacy.forEach((pharmacy, index) => {
                const item = document.createElement('div');
                item.className = 'service-item' + (index === 0 ? ' nearest' : '');
                item.innerHTML = `<span>${pharmacy.name}</span><span class="distance">${pharmacy.distance.toFixed(1)} ÙƒÙ…</span>`;
                item.addEventListener('click', () => showRouteToService(pharmacy));
                pharmacyList.appendChild(item);
            });

            // Ù…Ø®Ø§Ø¨Ø± Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠØ©
            services.laboratories.forEach((laboratory, index) => {
                const item = document.createElement('div');
                item.className = 'service-item' + (index === 0 ? ' nearest' : '');
                item.innerHTML = `
                <span>${laboratory.name}</span>
                <span class="distance">${laboratory.distance.toFixed(1)} ÙƒÙ…</span>`;
                item.addEventListener('click', () => showRouteToService(laboratory));
                laboratoriesList.appendChild(item);
            });

            // Ø£Ø·Ø¨Ø§Ø¡
            services.doctor.forEach((doctor, index) => {
                const item = document.createElement('div');
                item.className = 'service-item' + (index === 0 ? ' nearest' : '');

                item.innerHTML = `
        <span>${doctor.lastName}</span>
        <span>${doctor.firstName}</span>        
        <span>${doctor.specialty}</span>
        <span class="distance">${doctor.distance.toFixed(1)} ÙƒÙ…</span>
    `;

                item.addEventListener('click', () => showRouteToService(doctor));
                doctorList.appendChild(item);
            });

            // depannage
            services.depannage.forEach((depannage, index) => {
                const item = document.createElement('div');
                item.className = 'service-item' + (index === 0 ? ' nearest' : '');
                item.innerHTML = `<span>${depannage.name}</span><span class="distance">${depannage.distance.toFixed(1)} ÙƒÙ…</span>`;
                item.addEventListener('click', () => showRouteToService(depannage));
                depannageList.appendChild(item);
            });

        }

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        function addMarkersToMap(services) {

            map.eachLayer(layer => {
                if (layer instanceof L.Marker && layer !== userMarker) {
                    map.removeLayer(layer);
                }
            });

            function buildPopupContent(service, isNearest) {

                const googleUrl = `https://www.google.com/maps/dir/?api=1&destination=${service.lat},${service.lng}`;

                let content = `<div class="map-popup ${isNearest ? 'nearest-popup' : ''}">`;

                if (isNearest) {
                    content += `<div class="nearest-badge">Ø§Ù„Ø£Ù‚Ø±Ø¨ Ø¥Ù„ÙŠÙƒ</div>`;
                }

                if (service.name) {
                    content += `<div class="popup-title">${service.name}</div>`;
                }

                if (service.firstName || service.lastName) {
                    content += `<div class="popup-doctor-name">
                ${service.firstName || ''} ${service.lastName || ''}
            </div>`;
                }

                if (service.specialty) {
                    content += `<div class="popup-specialty">${service.specialty}</div>`;
                }

                if (service.address) {
                    content += `<div class="popup-row">ğŸ“ ${service.address}</div>`;
                }

                if (service.phone) {
                    content += `<div class="popup-row">ğŸ“ 
                <a href="tel:${service.phone}">${service.phone}</a>
            </div>`;
                }

                if (service.distance !== undefined) {
                    content += `<div class="popup-distance">
                ğŸš— ${service.distance.toFixed(1)} ÙƒÙ…
            </div>`;
                }

                // Ø²Ø± Ø§Ù„ØªÙˆØ¬ÙŠÙ‡
                content += `
            <a href="${googleUrl}" target="_blank" class="popup-route-btn">
                ğŸ§­ ØªÙˆØ¬ÙŠÙ‡ Ø¹Ø¨Ø± Google Maps
            </a>
        `;

                content += `</div>`;
                return content;
            }

            function addMarker(service, iconHtml, colorVar, index) {

                if (!service.lat || !service.lng) return;

                const isNearest = index === 0;

                const icon = L.divIcon({
                    html: `<i class="${iconHtml}" 
                    style="color:${isNearest ? '#e63946' : colorVar};
                    font-size:${isNearest ? '24px' : '20px'};"></i>`,
                    iconSize: [25, 25],
                    iconAnchor: [12, 24],
                    popupAnchor: [0, -20],
                    className: isNearest ? 'custom-marker nearest-marker' : 'custom-marker'
                });

                L.marker([service.lat, service.lng], { icon })
                    .addTo(map)
                    .bindPopup(buildPopupContent(service, isNearest), {
                        maxWidth: 300,
                        className: 'custom-popup',
                        autoPan: true
                    });
            }

            services.hospitals.forEach((s, i) => addMarker(s, 'fas fa-hospital', 'var(--hospital-color)', i));
            services.police.forEach((s, i) => addMarker(s, 'fas fa-shield-alt', 'var(--police-color)', i));
            services.military.forEach((s, i) => addMarker(s, 'fas fa-star', 'var(--military-color)', i));
            services.civilDefense.forEach((s, i) => addMarker(s, 'fas fa-fire-extinguisher', 'var(--civil-defense-color)', i));
            services.pharmacy.forEach((s, i) => addMarker(s, 'fas fa-capsules', 'var(--pharmacy-color)', i));
            services.laboratories.forEach((s, i) => addMarker(s, 'fas fa-vial', 'var(--laboratory-color)', i));
            services.doctor.forEach((s, i) => addMarker(s, 'fas fa-user-md', 'var(--doctor-color)', i));
            services.depannage.forEach((s, i) => addMarker(s, 'fas fa-truck-pickup', 'var(--depannage-color)', i));

        }

        // Ø­Ø¯Ø« ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹
        document.getElementById('getLocation').addEventListener('click', () => {
            const status = document.getElementById('locationStatus');
            const button = document.getElementById('getLocation');

            button.disabled = true;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...';
            status.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ...';
            status.style.color = '#ffdddd';

            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    async (position) => {
                        const userLat = position.coords.latitude;
                        const userLng = position.coords.longitude;
                        userLocation = { lat: userLat, lng: userLng };

                        const coordsText = `ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ: ${userLat.toFixed(4)}, ${userLng.toFixed(4)}`;
                        status.textContent = coordsText;
                        status.style.color = '#aaffaa';

                        const address = await getAddressFromCoordinates(userLat, userLng);
                        if (address) status.innerHTML = `${coordsText}<br>${address}`;

                        if (userMarker) map.removeLayer(userMarker);
                        userMarker = L.marker([userLat, userLng], {
                            icon: L.divIcon({
                                html: '<i class="fas fa-user" style="color: #6a1b9a; font-size: 24px;"></i>',
                                iconSize: [24, 24],
                                className: 'user-marker'
                            })
                        }).addTo(map).bindPopup('<b>Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø¢Ù†</b>');

                        map.setView([userLat, userLng], 13);

                        const nearestServices = findNearestServices(userLat, userLng);
                        displayServices(nearestServices);
                        addMarkersToMap(nearestServices);

                        button.disabled = false;
                        button.innerHTML = '<i class="fas fa-map-marker-alt"></i> ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ';
                    },
                    (error) => {
                        let errorMessage = 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹. ';
                        switch (error.code) {
                            case error.PERMISSION_DENIED: errorMessage += 'ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø¥Ø°Ù†.'; break;
                            case error.POSITION_UNAVAILABLE: errorMessage += 'Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªØ§Ø­Ø©.'; break;
                            case error.TIMEOUT: errorMessage += 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ù‡Ù„Ø©.'; break;
                            default: errorMessage += 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ.';
                        }
                        status.textContent = errorMessage;
                        status.style.color = '#ffaaaa';

                        userLocation = { lat: 36.7525, lng: 3.0418 };
                        const nearestServices = findNearestServices(userLocation.lat, userLocation.lng);
                        displayServices(nearestServices);
                        addMarkersToMap(nearestServices);

                        button.disabled = false;
                        button.innerHTML = '<i class="fas fa-map-marker-alt"></i> ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ';
                    }
                );
            } else {
                status.textContent = 'Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ';
                status.style.color = '#ffaaaa';
                button.disabled = false;
                button.innerHTML = '<i class="fas fa-map-marker-alt"></i> ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ';
            }

            localStorage.setItem('userLat', userLat);
            localStorage.setItem('userLon', userLon);
            localStorage.setItem('locationTimestamp', Date.now());

        });

        // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
        document.getElementById('showAllServices').addEventListener('click', () => {


            const allServices = {};
            for (const type in serviceLocations) {
                allServices[type] = serviceLocations[type].map(s => ({
                    ...s,
                    distance: calculateDistance(userLocation.lat, userLocation.lng, s.lat, s.lng)
                }));
            }

            displayServices(allServices);
            addMarkersToMap(allServices);

            const allPoints = Object.values(allServices).flat().map(s => [s.lat, s.lng]);
            if (allPoints.length > 0) {
                const bounds = L.latLngBounds(allPoints);
                if (userMarker) bounds.extend([userLocation.lat, userLocation.lng]);
                map.fitBounds(bounds);
            }
        });

        // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø³Ø§Ø±
        function showRouteToService(service) {
            
            if (!userLocation) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ø£ÙˆÙ„Ø§ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø©');
                return;
            }

            const modal = document.getElementById('routeModal');
            const routeTitle = document.getElementById('routeTitle');
            const routeDetails = document.getElementById('routeDetails');

            routeTitle.textContent = service.name;

            const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&origin=${userLocation.lat},${userLocation.lng}&destination=${service.lat},${service.lng}&travelmode=driving`;
            const cleanPhone = service.phone ? service.phone.replace(/[^\d+]/g, '') : '';

            routeDetails.innerHTML = `
    <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${service.address || ''}</p>
    <p><strong>Ø§Ù„Ù‡Ø§ØªÙ:</strong> 
        <a href="tel:${cleanPhone}" class="phone-link" dir="ltr" style="text-decoration:none; color:inherit;">
            <span class="phone-number">${service.phone || ''}</span>
        </a>
    </p>
    <a href="${googleMapsUrl}" target="_blank" class="google-route-btn">Ø§Ù„ØªÙ†Ù‚Ù„ Ø¹Ø¨Ø± Google Maps</a>
`;

            modal.style.display = 'flex';

            setTimeout(() => {
                if (!miniMap) {
                    miniMap = L.map('miniMap', { zoomControl: false, attributionControl: false });
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(miniMap);
                }

                miniMap.setView([service.lat, service.lng], 14);
                if (miniMarker) miniMap.removeLayer(miniMarker);
                miniMarker = L.marker([service.lat, service.lng]).addTo(miniMap);

                if (miniRouteLine) miniMap.removeLayer(miniRouteLine);
                miniRouteLine = L.polyline([[userLocation.lat, userLocation.lng], [service.lat, service.lng]], {
                    color: '#1a73e8', weight: 4, opacity: 0.8
                }).addTo(miniMap);

                miniMap.fitBounds([[userLocation.lat, userLocation.lng], [service.lat, service.lng]], { padding: [30, 30] });
                miniMap.invalidateSize();
            }, 200);
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
        document.addEventListener('click', function (e) {
            const modal = document.getElementById('routeModal');
            if (e.target.closest('.close-modal') || e.target === modal) {
                modal.style.display = 'none';
            }
        });

        // ØªÙ‡ÙŠØ¦Ø© Ø£ÙˆÙ„ÙŠØ© Ù„Ù„Ø®Ø±ÙŠØ·Ø©
        document.addEventListener('DOMContentLoaded', () => {
            const defaultLocation = { lat: 36.7525, lng: 3.0418 };
            const nearestServices = findNearestServices(defaultLocation.lat, defaultLocation.lng);
            addMarkersToMap(nearestServices);
            displayServices(nearestServices);

        });

        // Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰
        const scrollBtn = document.getElementById('scrollTopBtn');
        window.addEventListener('scroll', () => {
            scrollBtn.style.display = window.pageYOffset > 300 ? 'block' : 'none';
        });
        scrollBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });


        // Ø²Ø± Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø§Ù„Ø¹Ø§Ø¦Ù…

        const toggleBtn = document.getElementById("emergencyToggle");
        const menu = document.getElementById("emergencyMenu");

        toggleBtn.addEventListener("click", () => {
            menu.style.display = menu.style.display === "flex" ? "none" : "flex";
        });

        // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
        document.addEventListener("click", function (e) {
            if (!e.target.closest(".floating-wrapper")) {
                menu.style.display = "none";
            }
        });


        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‡ÙŠØ¯Ø±

        let lastScrollTop = 0;
        const header = document.querySelector("header");

        window.addEventListener("scroll", function () {

            const currentScroll = window.pageYOffset || document.documentElement.scrollTop;

            if (currentScroll > lastScrollTop && currentScroll > 100) {
                // Ø§Ù„Ù†Ø²ÙˆÙ„ Ù„Ù„Ø£Ø³ÙÙ„
                header.classList.add("hide-header");
            } else {
                // Ø§Ù„ØµØ¹ÙˆØ¯ Ù„Ù„Ø£Ø¹Ù„Ù‰
                header.classList.remove("hide-header");
            }

            lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
        });

    </script>

</body>

</html>